# the name of your primary tmux session
SESSION=dev

# if the session is already running, just attach to it.
tmux has-session -t $SESSION
if [ $? -eq 0 ]; then
    echo "Session $SESSION already exists. Attaching."
    sleep 1
    tmux -2 attach -t $SESSION
    exit 0;
fi

# create a new session, named $SESSION, and detach from it
tmux -2 new-session -d -s $SESSION

# Now populate the session with the windows you use every day
# Some windows I specifically want at a particular index.
# I always want IRC in window 0 and Email in window 1.

tmux new-window    -t $SESSION:0 -k -n irc weechat-curses
# keep window open and use respawn-window to restart
#tmux set-window-option -t $SESSION:0 remain-on-exit on
tmux rename-window -t $SESSION:0 irc
tmux new-window    -t $SESSION:1 -n zsh
# After those base windows are statically defined, what follows depends where
# I'm working and what my focus is.
# So these new windows will just  number sequentially.
# You might prefer to use send-keys rather than execute ssh immediately...
tmux new-window    -t $SESSION -a -n vim vim
tmux new-window    -t $SESSION -a -n twitter "t stream timeline"
tmux new-window    -t $SESSION -a -n mail mutt

# all done. select starting window and get to work
# you may need to cycle through windows and type in passwords
# if you don't use ssh keys
tmux select-window -t $SESSION:0
tmux -2 attach -t $SESSION
